<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>

</html>

<script>


    let obja = {
        arr: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
        name: 'feimao',
        user: {
            sex: '♂',
            name: {
                sex: {
                    upload: 'www.baidu.com',
                }
            }
        },
    }




    //深拷贝的第一种方法
    function copy(obj) {
        //每次的数据就判断是否是数组还是对象
        let res = obj instanceof Array ? [] : {};
        //循环添加数据
        for (let key in obj) {
            //把数据添加到res 中 然后进行判断如果里面是对象的话那么就使用递归进行再次循环判断
            res[key] = obj[key] instanceof Object ? copy(obj[key]) : obj[key];
        }

        //返回数据
        return res;
    }
    let s = copy(obja);
    //给深拷贝的数据中的arr添加 数据 
    s.arr.push(12);
    console.log(JSON.stringify(s, null, 2));
    //结果原拷贝的数据没有被 修改
    console.log(JSON.stringify(obja, null, 2));





    //深拷贝第二种方法实现深拷贝

    //方法解释
    //entries 可以将对象变成一个数组解构
    function copy(obj) {
        let res = obj instanceof Array ? [] : {};
        for (let [k, v] of Object.entries(obj)) {
            res[k] = typeof v == 'objcet' ? copy(v) : v;
        }

        return res;
    }
    let s = copy(obja);
    s.arr.push(2333);

    console.log(JSON.stringify(s, null, 2));
    console.log(JSON.stringify(obja, null, 2));
</script>